---
title: "EDA Notebook"
output: html_document
---

```{r}
library("tidyverse")
library("dplyr")
library('fpp2')
library('tseries')
```



```{r}
construction <- read.csv("../data/VIP-mf.csv")
date_index <- read.csv("../data/date-index.csv")

filter_data_ts <- function(category, type) {
    overall_spending <- filter(construction, cat_idx==category & dt_idx ==type)
    combined <- merge(overall_spending, date_index, by = "per_idx")
    combined$per_name <- paste(combined$per_name,"-01",sep="")
    combined$date <- as.Date(combined$per_name, format = "%b-%y-%d")
    return(ts(combined$val, start = c(2002, 1), frequency = 12))
}

overall_spending_ts <- filter_data_ts(1, 1)

autoplot(overall_spending_ts)

```

```{r}
private_commercial_ts <- filter_data_ts(6, 2)
autoplot(private_commercial_ts)
```
```{r}
public_total_ts <- filter_data_ts(1, 3)
autoplot(public_total_ts)
```

```{r}
private_total_ts <- filter_data_ts(1, 2)
autoplot(private_total_ts)
```

```{r}
#autoplot(filter_data_ts(1, 3))
adf.test(filter_data_ts(5, 3))
autoplot(diff(overall_spending_ts))
```

# Testing via Augmented Dickey-Fuller Test
```{r}
# nonstationary: bad stationary: good
# https://www.investopedia.com/articles/trading/07/stationary.asp
adf.test(overall_spending_ts)
adf.test(diff(overall_spending_ts))
adf.test(private_commercial_ts)
adf.test(public_total_ts)
adf.test(private_total_ts)

```

```{r}
ar1_close <- Arima(overall_spending_ts, order = c(1,0,0))
ar1_diff <- Arima(diff(overall_spending_ts), order = c(1,0,0))

print(ar1_close)
print(ar1_diff)
```

